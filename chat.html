<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConnectSphere - Quantum Chat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* All existing styles remain the same */
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .primary-gradient {
            background: linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%);
        }
        .message-sent {
            background: linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%);
            color: white;
            margin-left: auto;
            border-radius: 20px 20px 5px 20px;
        }
        .message-received {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 20px 20px 20px 5px;
            backdrop-filter: blur(10px);
        }

        /* Emotion Reactive UI */
        .emotion-joy { background: linear-gradient(135deg, #1a2a6c 0%, #b21f1f 0%, #fdbb2d 100%) !important; }
        .emotion-love { background: linear-gradient(135deg, #834d9b 0%, #d04ed6 100%) !important; }
        .emotion-calm { background: linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%) !important; }
        .emotion-excited { background: linear-gradient(135deg, #f46b45 0%, #eea849 100%) !important; }
        .emotion-sad { background: linear-gradient(135deg, #3a7bd5 0%, #3a6073 100%) !important; }
        .emotion-angry { background: linear-gradient(135deg, #c31432 0%, #240b36 100%) !important; }
        .emotion-default { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important; }

        .emotion-border-joy { border-color: #FFD93D !important; }
        .emotion-border-love { border-color: #FF6B9D !important; }
        .emotion-border-calm { border-color: #6BC5D2 !important; }
        .emotion-border-excited { border-color: #FF9A3D !important; }
        .emotion-border-sad { border-color: #7B8FD0 !important; }
        .emotion-border-angry { border-color: #FF6B6B !important; }

        /* Gamification Elements */
        .streak-fire {
            animation: firePulse 2s infinite;
        }
        @keyframes firePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .connectcoin-glow {
            animation: coinSpin 3s linear infinite;
        }
        @keyframes coinSpin {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }
        .level-up-flash {
            animation: levelUp 0.5s ease-out;
        }
        @keyframes levelUp {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Collab Room Styles */
        .collab-room {
            background: rgba(59, 130, 246, 0.1);
            border: 2px dashed #3B82F6;
            border-radius: 15px;
            padding: 20px;
            margin: 10px 0;
        }
        .collab-tool {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            margin: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .collab-tool:hover {
            background: rgba(59, 130, 246, 0.3);
            transform: scale(1.05);
        }

        /* Time Capsule Styles */
        .time-capsule {
            background: linear-gradient(135deg, #8B5CF6 0%, #3B82F6 100%);
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
        }
        .time-capsule::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(transparent, rgba(255,255,255,0.3), transparent);
            animation: rotate 4s linear infinite;
        }
        @keyframes rotate {
            100% { transform: rotate(360deg); }
        }

        /* Compatibility DNA Styles */
        .dna-helix {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 60px;
            position: relative;
        }
        .dna-node {
            width: 8px;
            height: 8px;
            background: #3B82F6;
            border-radius: 50%;
            margin: 0 2px;
            animation: dnaFloat 2s ease-in-out infinite;
        }
        @keyframes dnaFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Enhanced existing styles */
        .connection-status {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            z-index: 1000;
            transition: all 0.3s ease-in-out;
        }
        .connection-status.connected {
            background: rgba(34, 197, 94, 0.8);
            color: white;
        }
        .connection-status.connecting {
            background: rgba(245, 158, 11, 0.8);
            color: white;
        }
        .connection-status.disconnected {
            background: rgba(239, 68, 68, 0.8);
            color: white;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-container {
            background: rgba(30, 30, 60, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .dropdown-menu {
            position: absolute;
            top: 60px;
            right: 20px;
            background: rgba(30, 30, 60, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 10px;
            padding: 10px;
            min-width: 200px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        .dropdown-item {
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .dropdown-item:hover {
            background: rgba(59, 130, 246, 0.2);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(34, 197, 94, 0.9);
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            z-index: 1001;
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .emoji-picker {
            position: absolute;
            bottom: 70px;
            right: 10px;
            background: rgba(30, 30, 60, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 10px;
            padding: 15px;
            width: 300px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
        }
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 5px;
        }
        .emoji {
            padding: 5px;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }
        .emoji:hover {
            background: rgba(59, 130, 246, 0.3);
            transform: scale(1.1);
        }
        
        /* Upload Progress */
        .upload-progress {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }
        .upload-progress-bar {
            height: 100%;
            background: #3B82F6;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Media Preview */
        .media-preview {
            max-height: 200px;
            object-fit: cover;
            border-radius: 12px;
            margin-top: 10px;
        }

        /* Cloudinary Optimized Images */
        .optimized-image {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            object-fit: cover;
        }

        /* Chat specific styles */
        .chat-item {
            padding: 12px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .chat-item:hover {
            background: rgba(59, 130, 246, 0.2);
        }
        .chat-item.active {
            background: rgba(59, 130, 246, 0.3);
        }
        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3B82F6, #8B5CF6);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
        }
        .chat-item-info {
            flex: 1;
            min-width: 0;
        }
        .chat-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4px;
        }
        .chat-item-name {
            font-weight: 600;
            color: white;
            font-size: 0.9rem;
        }
        .chat-item-time {
            font-size: 0.75rem;
            color: #8B5CF6;
        }
        .chat-item-preview {
            font-size: 0.8rem;
            color: #94A3B8;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 4px;
        }
        .chat-item-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chat-badge {
            background: #EF4444;
            color: white;
            border-radius: 10px;
            padding: 2px 8px;
            font-size: 0.75rem;
        }
        .chat-type-indicator {
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 8px;
            background: rgba(139, 92, 246, 0.3);
            color: #8B5CF6;
        }
        .type-personal { background: rgba(34, 197, 94, 0.3); color: #22C55E; }
        .type-group { background: rgba(249, 115, 22, 0.3); color: #F97316; }

        .whisper-message {
            border: 2px solid #F59E0B;
        }
        .whisper-indicator {
            color: #F59E0B;
            font-size: 0.75rem;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .emotion-indicator {
            margin-left: 8px;
        }

        .message {
            margin-bottom: 16px;
            display: flex;
        }
        .message.sent {
            justify-content: flex-end;
        }
        .message.received {
            justify-content: flex-start;
        }
        .message-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
        }
        .message-sender {
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: #E2E8F0;
        }
        .message-content {
            word-wrap: break-word;
        }
        .message-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 4px;
            font-size: 0.75rem;
            opacity: 0.8;
        }
        .message-time {
            color: inherit;
        }
        .message-status {
            margin-left: 8px;
        }
        .message-date-divider {
            text-align: center;
            margin: 20px 0;
            position: relative;
        }
        .date-label {
            background: rgba(59, 130, 246, 0.3);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            color: #E2E8F0;
        }

        .no-chats {
            text-align: center;
            padding: 3rem;
            color: #7f8c8d;
        }

        .hidden {
            display: none !important;
        }

        /* Loading animation */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        /* NEW FEATURES STYLES */
        
        /* Quantum Entanglement Effect */
        .quantum-entanglement {
            position: relative;
            overflow: hidden;
        }
        .quantum-entanglement::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(59,130,246,0.2) 0%, transparent 70%);
            animation: quantumPulse 3s infinite alternate;
            z-index: -1;
        }
        @keyframes quantumPulse {
            0% { transform: scale(1); opacity: 0.3; }
            100% { transform: scale(1.2); opacity: 0.7; }
        }
        
        /* Mood Sync Indicator */
        .mood-sync {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.7rem;
            color: #8B5CF6;
            margin-top: 5px;
        }
        .mood-sync.active {
            color: #22C55E;
        }
        .mood-sync-bar {
            width: 60px;
            height: 4px;
            background: rgba(139, 92, 246, 0.3);
            border-radius: 2px;
            overflow: hidden;
        }
        .mood-sync-progress {
            height: 100%;
            background: #8B5CF6;
            border-radius: 2px;
            transition: width 0.5s ease;
        }
        
        /* Thought Bubble Feature */
        .thought-bubble {
            position: relative;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s;
        }
        .thought-bubble:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        .thought-bubble::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 20px;
            width: 15px;
            height: 15px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
        }
        .thought-bubble::after {
            content: '';
            position: absolute;
            top: -15px;
            left: 35px;
            width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }
        
        /* Neural Connection Visualization */
        .neural-connection {
            position: relative;
            height: 100px;
            width: 100%;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            margin: 10px 0;
        }
        .neural-node {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #3B82F6;
            border-radius: 50%;
            animation: neuralPulse 2s infinite;
        }
        .neural-connection-line {
            position: absolute;
            height: 1px;
            background: linear-gradient(90deg, transparent, #3B82F6, transparent);
            transform-origin: left center;
        }
        @keyframes neuralPulse {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.5); opacity: 1; }
        }
        
        /* Quantum State Message */
        .quantum-state-message {
            position: relative;
            background: linear-gradient(135deg, rgba(59,130,246,0.2), rgba(139,92,246,0.2));
            border: 1px solid rgba(59,130,246,0.3);
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
            overflow: hidden;
        }
        .quantum-state-message::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3B82F6, #8B5CF6, transparent);
            animation: quantumFlow 3s linear infinite;
        }
        @keyframes quantumFlow {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Emotion Wave Visualization */
        .emotion-wave {
            height: 40px;
            width: 100%;
            position: relative;
            overflow: hidden;
            border-radius: 5px;
            margin: 10px 0;
        }
        .emotion-wave-bar {
            position: absolute;
            bottom: 0;
            width: 4px;
            background: #3B82F6;
            border-radius: 2px 2px 0 0;
            animation: waveRise 1.5s ease-out;
        }
        @keyframes waveRise {
            0% { height: 0; }
            100% { height: var(--wave-height); }
        }
        
        /* Memory Lane Feature */
        .memory-lane {
            background: rgba(30, 30, 60, 0.7);
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #8B5CF6;
        }
        .memory-date {
            font-size: 0.8rem;
            color: #8B5CF6;
            margin-bottom: 5px;
        }
        .memory-content {
            font-size: 0.9rem;
            color: #E2E8F0;
        }
        
        /* Quantum Typing Indicator */
        .quantum-typing {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px 15px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 20px;
            width: fit-content;
            margin: 5px 0;
        }
        .quantum-dot {
            width: 8px;
            height: 8px;
            background: #3B82F6;
            border-radius: 50%;
            animation: quantumBounce 1.4s infinite ease-in-out;
        }
        .quantum-dot:nth-child(1) { animation-delay: -0.32s; }
        .quantum-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes quantumBounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
    </style>
</head>
<body class="h-full bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 text-white emotion-default" id="emotionBody">
    <!-- Connection Status -->
    <div class="connection-status connecting" id="connectionStatus">
        <i class="fas fa-circle-notch fa-spin mr-2"></i>
        <span>Connecting to Firebase...</span>
    </div>

    <!-- Main App Content - No Loading Screen -->
    <div id="chat-app" class="h-full flex flex-col">
        <!-- Gamification Header -->
        <div class="glass-effect border-b border-blue-800 p-3">
            <div class="flex items-center justify-between max-w-6xl mx-auto">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="streak-fire text-yellow-400">
                            <i class="fas fa-fire"></i>
                        </div>
                        <span class="text-sm font-bold" id="streakCount">0</span>
                        <span class="text-xs text-blue-300">day streak</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="connectcoin-glow text-yellow-300">
                            <i class="fas fa-coins"></i>
                        </div>
                        <span class="text-sm font-bold" id="connectcoinsCount">0</span>
                        <span class="text-xs text-blue-300">ConnectCoins</span>
                    </div>
                    <div class="level-badge bg-blue-600 px-3 py-1 rounded-full text-xs">
                        Level <span id="userLevel">1</span>
                    </div>
                </div>
                
                <div class="flex items-center space-x-3">
                    <button id="viewLeaderboard" class="text-blue-300 hover:text-blue-200 text-sm transition-colors">
                        <i class="fas fa-trophy"></i> Leaderboard
                    </button>
                    <button id="viewChallenges" class="text-blue-300 hover:text-blue-200 text-sm transition-colors">
                        <i class="fas fa-flag"></i> Challenges
                    </button>
                    <button id="logout-btn" class="text-red-300 hover:text-red-200 text-sm transition-colors">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>

        <div class="flex flex-1 overflow-hidden">
            <!-- Enhanced Sidebar -->
            <div class="w-80 bg-gray-900 border-r border-blue-800 flex flex-col">
                <div class="p-4 border-b border-blue-800">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold text-blue-300">Quantum Chats</h2>
                        <div class="flex space-x-2">
                            <button class="text-blue-400 hover:text-blue-300 transition-colors" id="addFriendBtn" title="Add Friend">
                                <i class="fas fa-user-plus"></i>
                            </button>
                            <button class="text-blue-400 hover:text-blue-300 transition-colors" id="createGroupBtn" title="Create Group">
                                <i class="fas fa-users"></i>
                            </button>
                            <button class="text-blue-400 hover:text-blue-300 transition-colors" id="createCollabRoomBtn" title="Collab Room">
                                <i class="fas fa-palette"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="grid grid-cols-2 gap-2 mb-4">
                        <button class="p-2 glass-effect rounded-lg text-xs hover:bg-blue-800/50 transition-all duration-200" id="timeCapsuleBtn">
                            <i class="fas fa-clock mr-1"></i> Time Capsule
                        </button>
                        <button class="p-2 glass-effect rounded-lg text-xs hover:bg-blue-800/50 transition-all duration-200" id="nearbyPulseBtn">
                            <i class="fas fa-satellite mr-1"></i> Nearby Pulse
                        </button>
                    </div>
                    
                    <div class="relative mb-4">
                        <input type="text" placeholder="Search chats..." 
                               class="w-full p-2 pl-10 bg-gray-800 border border-blue-700 rounded-lg text-white placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400 transition-all duration-200"
                               id="chat-search">
                        <i class="fas fa-search absolute left-3 top-3 text-blue-400"></i>
                    </div>
                    
                    <!-- Chat Type Filters -->
                    <div class="flex space-x-2 mb-4">
                        <button class="chat-type-btn active px-3 py-1 bg-blue-600 rounded-lg text-xs transition-colors" data-type="all">All</button>
                        <button class="chat-type-btn px-3 py-1 bg-gray-700 rounded-lg text-xs transition-colors hover:bg-gray-600" data-type="personal">Personal</button>
                        <button class="chat-type-btn px-3 py-1 bg-gray-700 rounded-lg text-xs transition-colors hover:bg-gray-600" data-type="group">Groups</button>
                    </div>
                </div>

                <div class="flex-1 overflow-y-auto p-4">
                    <!-- User Profile with Compatibility -->
                    <div class="p-3 mb-4 glass-effect rounded-lg">
                        <p class="text-sm font-semibold" id="current-user-name">Loading...</p>
                        <div class="flex items-center justify-between mt-2">
                            <div class="text-xs text-blue-300">
                                <div class="dna-helix">
                                    <div class="dna-node" style="animation-delay: 0s"></div>
                                    <div class="dna-node" style="animation-delay: 0.1s"></div>
                                    <div class="dna-node" style="animation-delay: 0.2s"></div>
                                    <div class="dna-node" style="animation-delay: 0.3s"></div>
                                    <div class="dna-node" style="animation-delay: 0.4s"></div>
                                </div>
                                <span id="compatibilityScore">AI Ready</span>
                            </div>
                            <div class="text-xs bg-green-500 px-2 py-1 rounded-full" id="userStatus">Online</div>
                        </div>
                    </div>

                    <!-- NEW FEATURE: Quantum Entanglement Status -->
                    <div class="p-3 mb-4 glass-effect rounded-lg quantum-entanglement">
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-blue-300">Quantum Entanglement</span>
                            <span class="text-xs text-green-400" id="entanglementStatus">Active</span>
                        </div>
                        <div class="mood-sync mt-2">
                            <span class="text-xs">Mood Sync:</span>
                            <div class="mood-sync-bar">
                                <div class="mood-sync-progress" style="width: 75%"></div>
                            </div>
                            <span class="text-xs">75%</span>
                        </div>
                    </div>

                    <!-- Active Challenges -->
                    <div class="mb-4">
                        <h3 class="text-sm font-semibold text-blue-300 mb-2">Today's Challenges</h3>
                        <div id="activeChallenges" class="space-y-2">
                            <div class="glass-effect rounded-lg p-3">
                                <div class="flex justify-between items-center mb-2">
                                    <div class="text-sm font-semibold text-white">Send 5 Quantum Messages</div>
                                    <span class="text-xs text-yellow-400">+25 ðŸª™</span>
                                </div>
                                <div class="w-full bg-gray-700 rounded-full h-2 mb-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 40%"></div>
                                </div>
                                <div class="text-xs text-blue-400 text-right">2/5 completed</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Chat List -->
                    <div class="space-y-2" id="chat-list">
                        <!-- Sample chat items would be populated here -->
                    </div>
                </div>
            </div>

            <!-- Main Chat Area -->
            <div class="flex-1 flex flex-col">
                <!-- No Chat Selected View -->
                <div id="no-chat-view" class="flex-1 flex items-center justify-center bg-gradient-to-br from-blue-900/20 to-purple-900/20">
                    <div class="text-center max-w-md">
                        <div class="text-8xl mb-6 opacity-50">ðŸ’¬</div>
                        <h2 class="text-3xl font-bold text-blue-300 mb-4">Welcome to Quantum Chat</h2>
                        <p class="text-blue-400 mb-8 text-lg">Select a conversation from the sidebar or start a new one to begin your messaging journey</p>
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <button id="new-chat-btn" class="bg-blue-600 text-white px-8 py-4 rounded-2xl font-semibold hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg">
                                <i class="fas fa-plus mr-2"></i>Start New Chat
                            </button>
                            <button id="createCollabRoomBtnMain" class="bg-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:bg-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg">
                                <i class="fas fa-palette mr-2"></i>Create Room
                            </button>
                        </div>
                        
                        <!-- NEW FEATURE: Neural Connection Visualization -->
                        <div class="neural-connection mt-8">
                            <!-- Neural nodes and connections will be generated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Active Chat View -->
                <div id="active-chat-view" class="hidden flex-1 flex flex-col">
                    <!-- Chat Header -->
                    <div class="glass-effect border-b border-blue-800 px-6 py-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center shadow-lg">
                                    <span id="chat-avatar-text" class="text-white font-bold text-sm">CH</span>
                                </div>
                                <div>
                                    <h2 id="chat-title" class="font-semibold text-lg text-white">Chat Name</h2>
                                    <p id="chat-members" class="text-sm text-blue-300">2 members â€¢ group chat</p>
                                    
                                    <!-- NEW FEATURE: Mood Sync Indicator in Chat Header -->
                                    <div class="mood-sync active mt-1">
                                        <i class="fas fa-heart"></i>
                                        <span class="text-xs">Mood Sync: 85%</span>
                                        <div class="mood-sync-bar">
                                            <div class="mood-sync-progress" style="width: 85%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4 text-blue-400">
                                <button id="videoCallBtn" class="w-10 h-10 hover:bg-blue-800/50 rounded-full flex items-center justify-center hover:text-blue-300 transition-all duration-200" title="Video Call">
                                    <i class="fas fa-video"></i>
                                </button>
                                <button id="voiceMessageBtn" class="w-10 h-10 hover:bg-blue-800/50 rounded-full flex items-center justify-center hover:text-blue-300 transition-all duration-200" title="Voice Message">
                                    <i class="fas fa-microphone"></i>
                                </button>
                                <button id="fileShareBtn" class="w-10 h-10 hover:bg-blue-800/50 rounded-full flex items-center justify-center hover:text-blue-300 transition-all duration-200" title="Share File">
                                    <i class="fas fa-paperclip"></i>
                                </button>
                                <button id="collabRoomBtn" class="w-10 h-10 hover:bg-blue-800/50 rounded-full flex items-center justify-center hover:text-blue-300 transition-all duration-200" title="Collab Room">
                                    <i class="fas fa-palette"></i>
                                </button>
                                
                                <!-- NEW FEATURE: Quantum Message Button -->
                                <button id="quantumMessageBtn" class="w-10 h-10 hover:bg-blue-800/50 rounded-full flex items-center justify-center hover:text-blue-300 transition-all duration-200" title="Quantum Message">
                                    <i class="fas fa-atom"></i>
                                </button>
                                
                                <div class="relative">
                                    <button id="chatMenuBtn" class="w-10 h-10 hover:bg-blue-800/50 rounded-full flex items-center justify-center hover:text-blue-300 transition-all duration-200" title="More Options">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Messages Area -->
                    <div class="flex-1 overflow-y-auto p-6" id="messages-container">
                        <!-- Messages will be populated here -->
                        
                        <!-- NEW FEATURE: Thought Bubble -->
                        <div class="thought-bubble">
                            <div class="text-xs text-blue-400 mb-1">Thought Bubble</div>
                            <div class="text-sm">"What if we could send messages that change based on the reader's mood?"</div>
                        </div>
                        
                        <!-- NEW FEATURE: Memory Lane -->
                        <div class="memory-lane">
                            <div class="memory-date">1 year ago today</div>
                            <div class="memory-content">You and Alex discovered your shared love for quantum physics</div>
                        </div>
                        
                        <!-- NEW FEATURE: Quantum State Message -->
                        <div class="quantum-state-message">
                            <div class="text-xs text-blue-400 mb-1">Quantum State Message</div>
                            <div class="text-sm">This message exists in multiple states until observed</div>
                        </div>
                        
                        <!-- NEW FEATURE: Emotion Wave Visualization -->
                        <div class="emotion-wave" id="emotionWave">
                            <!-- Emotion wave bars will be generated by JavaScript -->
                        </div>
                    </div>

                    <!-- NEW FEATURE: Quantum Typing Indicator -->
                    <div class="quantum-typing hidden" id="quantumTypingIndicator">
                        <div class="quantum-dot"></div>
                        <div class="quantum-dot"></div>
                        <div class="quantum-dot"></div>
                        <span class="text-xs text-blue-300 ml-2">Quantum typing...</span>
                    </div>

                    <!-- Message Input Area -->
                    <div class="glass-effect border-t border-blue-800 p-4">
                        <div class="flex items-center space-x-4">
                            <button class="text-blue-400 hover:text-blue-300 transition-colors" id="emojiBtn">
                                <i class="far fa-smile text-xl"></i>
                            </button>
                            <button class="text-blue-400 hover:text-blue-300 transition-colors" id="attachmentBtn">
                                <i class="fas fa-paperclip text-xl"></i>
                            </button>
                            
                            <!-- NEW FEATURE: Emotion Selector -->
                            <div class="relative">
                                <button class="text-blue-400 hover:text-blue-300 transition-colors" id="emotionBtn">
                                    <i class="fas fa-heart text-xl"></i>
                                </button>
                                <div class="dropdown-menu hidden" id="emotionMenu">
                                    <div class="dropdown-item" data-emotion="joy">
                                        <i class="fas fa-laugh text-yellow-400"></i>
                                        <span>Joy</span>
                                    </div>
                                    <div class="dropdown-item" data-emotion="love">
                                        <i class="fas fa-heart text-red-400"></i>
                                        <span>Love</span>
                                    </div>
                                    <div class="dropdown-item" data-emotion="calm">
                                        <i class="fas fa-spa text-blue-400"></i>
                                        <span>Calm</span>
                                    </div>
                                    <div class="dropdown-item" data-emotion="excited">
                                        <i class="fas fa-star text-orange-400"></i>
                                        <span>Excited</span>
                                    </div>
                                    <div class="dropdown-item" data-emotion="sad">
                                        <i class="fas fa-sad-tear text-indigo-400"></i>
                                        <span>Sad</span>
                                    </div>
                                    <div class="dropdown-item" data-emotion="angry">
                                        <i class="fas fa-angry text-red-500"></i>
                                        <span>Angry</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex-1 relative">
                                <input type="text" 
                                       placeholder="Type a message..." 
                                       class="w-full p-4 bg-gray-800 border border-blue-700 rounded-2xl text-white placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400 transition-all duration-200"
                                       id="message-input">
                                <div class="emoji-picker hidden" id="emojiPicker">
                                    <div class="emoji-grid">
                                        <!-- Emojis will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                            <button class="bg-blue-600 text-white p-4 rounded-2xl hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg" id="send-btn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        
                        <!-- Upload Progress -->
                        <div class="upload-progress hidden" id="uploadProgress">
                            <div class="upload-progress-bar" id="uploadProgressBar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="newChatModal">
        <div class="modal-container">
            <h2 class="text-xl font-bold mb-4 text-blue-300">Start a New Chat</h2>
            <div class="space-y-4">
                <input type="text" placeholder="Search for users..." class="w-full p-3 bg-gray-800 border border-blue-700 rounded-lg text-white placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400">
                <div class="max-h-60 overflow-y-auto">
                    <!-- User list would be populated here -->
                </div>
                <div class="flex justify-end space-x-3 mt-4">
                    <button class="px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors" id="cancelNewChat">Cancel</button>
                    <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Start Chat</button>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW FEATURE: Quantum Message Modal -->
    <div class="modal" id="quantumMessageModal">
        <div class="modal-container">
            <h2 class="text-xl font-bold mb-4 text-blue-300">Create Quantum Message</h2>
            <div class="space-y-4">
                <p class="text-blue-400">Quantum messages exist in multiple states until observed by the recipient.</p>
                <textarea placeholder="Enter your quantum message..." class="w-full p-3 bg-gray-800 border border-blue-700 rounded-lg text-white placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400 h-32"></textarea>
                <div class="flex items-center space-x-2">
                    <input type="checkbox" id="superposition" class="rounded text-blue-600">
                    <label for="superposition" class="text-sm text-blue-300">Enable superposition (message changes based on observation)</label>
                </div>
                <div class="flex justify-end space-x-3 mt-4">
                    <button class="px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors" id="cancelQuantumMessage">Cancel</button>
                    <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Send Quantum</button>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW FEATURE: Time Capsule Modal -->
    <div class="modal" id="timeCapsuleModal">
        <div class="modal-container">
            <h2 class="text-xl font-bold mb-4 text-blue-300">Create Time Capsule</h2>
            <div class="space-y-4">
                <p class="text-blue-400">Create a message that will be delivered at a future date.</p>
                <textarea placeholder="Your time capsule message..." class="w-full p-3 bg-gray-800 border border-blue-700 rounded-lg text-white placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400 h-32"></textarea>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-sm text-blue-300 mb-1 block">Delivery Date</label>
                        <input type="date" class="w-full p-3 bg-gray-800 border border-blue-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400">
                    </div>
                    <div>
                        <label class="text-sm text-blue-300 mb-1 block">Delivery Time</label>
                        <input type="time" class="w-full p-3 bg-gray-800 border border-blue-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400">
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-4">
                    <button class="px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors" id="cancelTimeCapsule">Cancel</button>
                    <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Create Capsule</button>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW FEATURE: Collab Room Modal -->
    <div class="modal" id="collabRoomModal">
        <div class="modal-container">
            <h2 class="text-xl font-bold mb-4 text-blue-300">Create Collaboration Room</h2>
            <div class="space-y-4">
                <input type="text" placeholder="Room Name" class="w-full p-3 bg-gray-800 border border-blue-700 rounded-lg text-white placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400">
                <div class="collab-room">
                    <h3 class="text-lg font-semibold mb-2 text-blue-300">Collaboration Tools</h3>
                    <div class="grid grid-cols-2 gap-2">
                        <div class="collab-tool">
                            <i class="fas fa-paint-brush text-blue-400"></i>
                            <span class="text-sm ml-2">Whiteboard</span>
                        </div>
                        <div class="collab-tool">
                            <i class="fas fa-code text-blue-400"></i>
                            <span class="text-sm ml-2">Code Editor</span>
                        </div>
                        <div class="collab-tool">
                            <i class="fas fa-music text-blue-400"></i>
                            <span class="text-sm ml-2">Music Player</span>
                        </div>
                        <div class="collab-tool">
                            <i class="fas fa-video text-blue-400"></i>
                            <span class="text-sm ml-2">Video Sync</span>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-4">
                    <button class="px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors" id="cancelCollabRoom">Cancel</button>
                    <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Create Room</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification hidden" id="notification">
        <span id="notification-text"></span>
    </div>

    <script>
        // Initialize the app immediately without loading screen
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize UI components
            initializeUI();
            
            // Initialize Firebase connection
            initializeFirebase();
            
            // Initialize unique features
            initializeUniqueFeatures();
            
            // Set up event listeners
            setupEventListeners();
            
            // Update connection status to connected
            setTimeout(() => {
                document.getElementById('connectionStatus').className = 'connection-status connected';
                document.getElementById('connectionStatus').innerHTML = '<i class="fas fa-check-circle mr-2"></i><span>Connected to Firebase</span>';
            }, 1500);
        });

        // Initialize UI components
        function initializeUI() {
            // Set current user name
            document.getElementById('current-user-name').textContent = "Quantum User";
            
            // Populate sample chat list
            populateChatList();
            
            // Populate emoji picker
            populateEmojiPicker();
            
            // Generate neural connection visualization
            generateNeuralConnection();
            
            // Generate emotion wave visualization
            generateEmotionWave();
        }

        // Initialize Firebase connection
        function initializeFirebase() {
            // Firebase initialization code would go here
            // For demo purposes, we'll simulate a successful connection
            console.log("Firebase initialized successfully");
        }

        // Initialize unique features
        function initializeUniqueFeatures() {
            // Set up quantum entanglement effect
            setupQuantumEntanglement();
            
            // Set up mood sync
            setupMoodSync();
            
            // Set up thought bubbles
            setupThoughtBubbles();
            
            // Set up memory lane
            setupMemoryLane();
        }

        // Set up event listeners
        function setupEventListeners() {
            // Chat type filter buttons
            document.querySelectorAll('.chat-type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.chat-type-btn').forEach(b => b.classList.remove('active', 'bg-blue-600'));
                    document.querySelectorAll('.chat-type-btn').forEach(b => b.classList.add('bg-gray-700'));
                    this.classList.add('active', 'bg-blue-600');
                    this.classList.remove('bg-gray-700');
                    
                    // Filter chat list based on type
                    filterChats(this.dataset.type);
                });
            });
            
            // New chat button
            document.getElementById('new-chat-btn').addEventListener('click', function() {
                document.getElementById('newChatModal').style.display = 'flex';
            });
            
            // Cancel new chat
            document.getElementById('cancelNewChat').addEventListener('click', function() {
                document.getElementById('newChatModal').style.display = 'none';
            });
            
            // Send message button
            document.getElementById('send-btn').addEventListener('click', sendMessage);
            
            // Message input enter key
            document.getElementById('message-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Emoji button
            document.getElementById('emojiBtn').addEventListener('click', function() {
                const picker = document.getElementById('emojiPicker');
                picker.classList.toggle('hidden');
            });
            
            // Emotion button
            document.getElementById('emotionBtn').addEventListener('click', function() {
                const menu = document.getElementById('emotionMenu');
                menu.classList.toggle('hidden');
            });
            
            // Emotion selection
            document.querySelectorAll('#emotionMenu .dropdown-item').forEach(item => {
                item.addEventListener('click', function() {
                    const emotion = this.dataset.emotion;
                    changeEmotionTheme(emotion);
                    document.getElementById('emotionMenu').classList.add('hidden');
                });
            });
            
            // Quantum message button
            document.getElementById('quantumMessageBtn').addEventListener('click', function() {
                document.getElementById('quantumMessageModal').style.display = 'flex';
            });
            
            // Cancel quantum message
            document.getElementById('cancelQuantumMessage').addEventListener('click', function() {
                document.getElementById('quantumMessageModal').style.display = 'none';
            });
            
            // Time capsule button
            document.getElementById('timeCapsuleBtn').addEventListener('click', function() {
                document.getElementById('timeCapsuleModal').style.display = 'flex';
            });
            
            // Cancel time capsule
            document.getElementById('cancelTimeCapsule').addEventListener('click', function() {
                document.getElementById('timeCapsuleModal').style.display = 'none';
            });
            
            // Collab room buttons
            document.getElementById('createCollabRoomBtn').addEventListener('click', showCollabRoomModal);
            document.getElementById('createCollabRoomBtnMain').addEventListener('click', showCollabRoomModal);
            document.getElementById('collabRoomBtn').addEventListener('click', showCollabRoomModal);
            
            // Cancel collab room
            document.getElementById('cancelCollabRoom').addEventListener('click', function() {
                document.getElementById('collabRoomModal').style.display = 'none';
            });
            
            // Close modals when clicking outside
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.style.display = 'none';
                    }
                });
            });
            
            // Logout button
            document.getElementById('logout-btn').addEventListener('click', function() {
                showNotification('Logged out successfully');
                // In a real app, this would redirect to login page
            });
        }

        // Populate chat list with sample data
        function populateChatList() {
            const chatList = document.getElementById('chat-list');
            const chats = [
                { id: 1, name: "Alex Johnson", preview: "Hey, did you see the new quantum paper?", time: "10:30 AM", unread: 2, type: "personal", emotion: "excited" },
                { id: 2, name: "Tech Innovators", preview: "Sarah: The new prototype is ready!", time: "9:15 AM", unread: 5, type: "group", emotion: "joy" },
                { id: 3, name: "Maya Rodriguez", preview: "Thinking about you ðŸ’­", time: "Yesterday", unread: 0, type: "personal", emotion: "love" },
                { id: 4, name: "Quantum Study Group", preview: "David: I solved the entanglement problem", time: "Yesterday", unread: 0, type: "group", emotion: "calm" },
                { id: 5, name: "Ryan Chen", preview: "Let's meet up this weekend", time: "Wednesday", unread: 1, type: "personal", emotion: "excited" }
            ];
            
            chatList.innerHTML = '';
            
            chats.forEach(chat => {
                const chatItem = document.createElement('div');
                chatItem.className = 'chat-item';
                chatItem.innerHTML = `
                    <div class="chat-avatar">${chat.name.charAt(0)}</div>
                    <div class="chat-item-info">
                        <div class="chat-item-header">
                            <div class="chat-item-name">${chat.name}</div>
                            <div class="chat-item-time">${chat.time}</div>
                        </div>
                        <div class="chat-item-preview">${chat.preview}</div>
                        <div class="chat-item-meta">
                            <div class="chat-type-indicator type-${chat.type}">${chat.type}</div>
                            ${chat.unread > 0 ? `<div class="chat-badge">${chat.unread}</div>` : ''}
                        </div>
                    </div>
                `;
                
                chatItem.addEventListener('click', function() {
                    // Set this chat as active
                    document.querySelectorAll('.chat-item').forEach(item => item.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show the active chat view
                    document.getElementById('no-chat-view').classList.add('hidden');
                    document.getElementById('active-chat-view').classList.remove('hidden');
                    
                    // Update chat header
                    document.getElementById('chat-title').textContent = chat.name;
                    document.getElementById('chat-avatar-text').textContent = chat.name.charAt(0);
                    document.getElementById('chat-members').textContent = chat.type === 'personal' ? 'Online â€¢ Direct message' : '5 members â€¢ Group chat';
                    
                    // Change emotion theme based on chat
                    changeEmotionTheme(chat.emotion);
                });
                
                chatList.appendChild(chatItem);
            });
        }

        // Filter chats based on type
        function filterChats(type) {
            const chatItems = document.querySelectorAll('.chat-item');
            
            chatItems.forEach(item => {
                const chatType = item.querySelector('.chat-type-indicator').classList.contains('type-personal') ? 'personal' : 'group';
                
                if (type === 'all' || chatType === type) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Populate emoji picker
        function populateEmojiPicker() {
            const emojiPicker = document.getElementById('emojiPicker');
            const emojiGrid = emojiPicker.querySelector('.emoji-grid');
            
            // Sample emojis
            const emojis = ['ðŸ˜€', 'ðŸ˜‚', 'ðŸ¥°', 'ðŸ˜Ž', 'ðŸ¤”', 'ðŸ˜®', 'ðŸ‘', 'â¤ï¸', 'ðŸ”¥', 'âœ¨', 'ðŸŽ‰', 'ðŸ’¯', 'ðŸ¤', 'ðŸ™', 'ðŸ‘', 'ðŸ’ª'];
            
            emojis.forEach(emoji => {
                const emojiElement = document.createElement('div');
                emojiElement.className = 'emoji';
                emojiElement.textContent = emoji;
                emojiElement.addEventListener('click', function() {
                    const messageInput = document.getElementById('message-input');
                    messageInput.value += emoji;
                    messageInput.focus();
                    emojiPicker.classList.add('hidden');
                });
                
                emojiGrid.appendChild(emojiElement);
            });
        }

        // Send message function
        function sendMessage() {
            const messageInput = document.getElementById('message-input');
            const message = messageInput.value.trim();
            
            if (message) {
                // In a real app, this would send the message to Firebase
                // For demo, we'll just add it to the UI
                addMessageToUI(message, 'sent');
                messageInput.value = '';
                
                // Show typing indicator for 2 seconds then add a response
                showTypingIndicator();
                setTimeout(() => {
                    hideTypingIndicator();
                    addMessageToUI("Thanks for your message! This is an automated response.", 'received');
                }, 2000);
            }
        }

        // Add message to UI
        function addMessageToUI(message, type) {
            const messagesContainer = document.getElementById('messages-container');
            const messageElement = document.createElement('div');
            messageElement.className = `message ${type}`;
            
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageElement.innerHTML = `
                <div class="message-bubble ${type === 'sent' ? 'message-sent' : 'message-received'}">
                    ${type === 'received' ? `<div class="message-sender">Alex Johnson</div>` : ''}
                    <div class="message-content">${message}</div>
                    <div class="message-meta">
                        <div class="message-time">${timeString}</div>
                        ${type === 'sent' ? `<div class="message-status"><i class="fas fa-check"></i></div>` : ''}
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Show typing indicator
        function showTypingIndicator() {
            document.getElementById('quantumTypingIndicator').classList.remove('hidden');
        }

        // Hide typing indicator
        function hideTypingIndicator() {
            document.getElementById('quantumTypingIndicator').classList.add('hidden');
        }

        // Change emotion theme
        function changeEmotionTheme(emotion) {
            const body = document.getElementById('emotionBody');
            
            // Remove all emotion classes
            body.classList.remove('emotion-joy', 'emotion-love', 'emotion-calm', 'emotion-excited', 'emotion-sad', 'emotion-angry', 'emotion-default');
            
            // Add the new emotion class
            body.classList.add(`emotion-${emotion}`);
            
            // Update emotion wave
            updateEmotionWave(emotion);
            
            // Show notification
            showNotification(`Emotion theme changed to ${emotion}`);
        }

        // Show notification
        function showNotification(message) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            notificationText.textContent = message;
            notification.classList.remove('hidden');
            
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 3000);
        }

        // Show collab room modal
        function showCollabRoomModal() {
            document.getElementById('collabRoomModal').style.display = 'flex';
        }

        // Generate neural connection visualization
        function generateNeuralConnection() {
            const neuralConnection = document.querySelector('.neural-connection');
            const nodeCount = 15;
            
            // Create nodes
            for (let i = 0; i < nodeCount; i++) {
                const node = document.createElement('div');
                node.className = 'neural-node';
                node.style.left = `${Math.random() * 100}%`;
                node.style.top = `${Math.random() * 100}%`;
                node.style.animationDelay = `${Math.random() * 2}s`;
                neuralConnection.appendChild(node);
            }
            
            // Create connections
            for (let i = 0; i < nodeCount * 2; i++) {
                const line = document.createElement('div');
                line.className = 'neural-connection-line';
                line.style.left = `${Math.random() * 100}%`;
                line.style.top = `${Math.random() * 100}%`;
                line.style.width = `${10 + Math.random() * 50}px`;
                line.style.transform = `rotate(${Math.random() * 360}deg)`;
                neuralConnection.appendChild(line);
            }
        }

        // Generate emotion wave visualization
        function generateEmotionWave() {
            const emotionWave = document.getElementById('emotionWave');
            const barCount = 20;
            
            for (let i = 0; i < barCount; i++) {
                const bar = document.createElement('div');
                bar.className = 'emotion-wave-bar';
                bar.style.left = `${(i / barCount) * 100}%`;
                bar.style.setProperty('--wave-height', `${10 + Math.random() * 30}px`);
                bar.style.animationDelay = `${i * 0.1}s`;
                emotionWave.appendChild(bar);
            }
        }

        // Update emotion wave based on current emotion
        function updateEmotionWave(emotion) {
            const bars = document.querySelectorAll('.emotion-wave-bar');
            const emotionHeights = {
                joy: [30, 35, 40, 35, 30, 25, 30, 35, 40, 35, 30, 25, 30, 35, 40, 35, 30, 25, 30, 35],
                love: [20, 25, 30, 35, 40, 35, 30, 25, 20, 25, 30, 35, 40, 35, 30, 25, 20, 25, 30, 35],
                calm: [15, 18, 20, 18, 15, 12, 15, 18, 20, 18, 15, 12, 15, 18, 20, 18, 15, 12, 15, 18],
                excited: [35, 40, 45, 40, 35, 30, 35, 40, 45, 40, 35, 30, 35, 40, 45, 40, 35, 30, 35, 40],
                sad: [10, 12, 15, 12, 10, 8, 10, 12, 15, 12, 10, 8, 10, 12, 15, 12, 10, 8, 10, 12],
                angry: [40, 45, 50, 45, 40, 35, 40, 45, 50, 45, 40, 35, 40, 45, 50, 45, 40, 35, 40, 45]
            };
            
            const heights = emotionHeights[emotion] || emotionHeights.calm;
            
            bars.forEach((bar, index) => {
                bar.style.setProperty('--wave-height', `${heights[index]}px`);
            });
        }

        // Set up quantum entanglement effect
        function setupQuantumEntanglement() {
            // This would connect to a real quantum entanglement service in a production app
            console.log("Quantum entanglement initialized");
        }

        // Set up mood sync
        function setupMoodSync() {
            // This would sync moods between users in a real app
            console.log("Mood sync initialized");
        }

        // Set up thought bubbles
        function setupThoughtBubbles() {
            // Add click handler to thought bubbles
            document.querySelector('.thought-bubble').addEventListener('click', function() {
                showNotification("Thought bubble saved to your memory lane");
            });
        }

        // Set up memory lane
        function setupMemoryLane() {
            // This would fetch memories from the database in a real app
            console.log("Memory lane initialized");
        }
    </script>
</body>
</html>